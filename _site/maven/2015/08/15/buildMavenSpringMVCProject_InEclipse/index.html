
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	
	<title>Eclipse下构建SpringMVC的Maven项目</title>
    
	
	<meta name="author" content="Feng Ling">
	
	<link rel="stylesheet" href="/assets/themes/Snail/css/jquery.fancybox.css">
	<link rel="stylesheet" href="/assets/themes/Snail/css/main.css">
	<link rel="stylesheet" href="/assets/themes/Snail/css/pages/journal.css">
	<link rel="stylesheet" href="/assets/themes/Snail/css/team.css">
	<link rel="stylesheet" href="/assets/themes/Snail/css/static.css">
	<link rel="stylesheet" href="/assets/themes/Snail/css/errors.css">
	<link rel="stylesheet" href="/assets/themes/Snail/google-code-prettify/prettify.css">
	
	<link rel="shortcut icon" href="/assets/themes/Snail/img/1.jpeg">
	
	<script type="text/javascript" src="/assets/themes/Snail/js/jquery.min.js"></script>
	
	<script type="text/javascript" src="/assets/themes/Snail/js/auto_loadmore.js"></script>
	
	<script type="text/javascript" src="/assets/themes/Snail/google-code-prettify/prettify.js"></script>
	
	<script type="text/javascript">
	  $(function(){
		$("pre code").addClass("prettyprint linenums");
		prettyPrint();
	  });
	</script>
	
<!--[if lt IE 9]>
	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
</head>
<body>
	<noscript>
		&amp;lt;div id="no-js"&amp;gt;Please enable JavaScript in your browser to experience / fully&amp;lt;/div&amp;gt;
	</noscript>
    <div id="page-container">
		<div>
			<nav>
	<div id="nav-l">
	</div>
	<div id="nav-c">
		<ul id="nav-list" style="width: 700px;">
			<li id="home"><a href="/">Home</a></li>
			
			
			
				
				  
				
			 
				
				  
					
					<li id = "About Me"><a href="/about.html">About Me</a></li>
					
				  
				
			 
				
				  
					
					<li id = "Archive"><a href="/archive.html">Archive</a></li>
					
				  
				
			 
				
				  
				
			 
				
				  
					
					<li id = "Categories"><a href="/categories.html">Categories</a></li>
					
				  
				
			 
				
			 
				
				  
				
			 
				
				  
				
			 
				
				  
				
			 
				
				  
					
					<li id = "Tags"><a href="/tags.html">Tags</a></li>
					
				  
				
			 
				
			 
			
			
		</ul>
		<form id="nav-search" method="GET" action="/search.html">
			<div id="search-right-pix">
				<div id="search-left-pix">
					<div id="search-center-pix">
						<div id="search-icon-pix"></div>
						<input name="query" type="text" placeholder="Search">
					</div>
				</div>
			</div>
		</form>
		
		
	</div>
	<div id="nav-r">
	</div>
</nav>
			<div id="page-content">
				
<div id="page-content">
	<div class="cont932">
	<div id="journal-articles-block">
		<div class="journal-article">
			<div class="journal-post-info">
				<div class="journal-cat-box">
				
				
				<div class="journal-cat-box">

<a href="/categories.html#maven-ref" title="maven">
	maven

</a>
</div>
				
				</div>
			</div>
			<div class="journal-body">
				<h1 class="journal-title">Eclipse下构建SpringMVC的Maven项目<span class="author">by Mastery</span>
				</h1>
				<span class="the-article">
				<p>最近在学习Spring、SpringMVC、Maven，想在Eclipse下构建maven项目，不过由于是第一次操作且Eclipse默认支持的创建
org-archetype-webapp需要修改许多的配置，所以望在此分享给大家，</p>

<!--more-->

<h1 id="section">1.引言</h1>

<p>最近在学习Spring、SpringMVC、Maven，想在Eclipse下构建maven项目，不过由于是第一次操作且Eclipse默认支持的创建
org-archetype-webapp需要修改许多的配置，所以望在此分享给大家，可以让以后在构建的过程中不用花太多时间。</p>

<h1 id="eclipsemavenspringmvc">2.eclipse下使用maven构建SpringMVC</h1>

<p>在eclipse官网下载的Eclipse IDE for Java EE Developers的版本默认是已经安装了m2e插件的，所以大家不需要去重新安装；</p>

<p>我使用的是maven3.3.3和Eclipse4.4.2</p>

<p>1)maven下载链接：<a href="http://maven.apache.org/download.cgi">maven3.3.3</a></p>

<p>2)eclipse下载链接：<a href="http://www.eclipse.org/downloads/">eclipse</a></p>

<p>3)如果eclipse下没有m2e的插件，可参考<a href="http://blog.csdn.net/wode_dream/article/details/38052639">eclipse下安装m2e</a></p>

<p><strong>Notes:最后将eclipse中的maven版本配置成本地的maven，配置方式如下图：</strong></p>

<p>在eclipse中点击Window-&gt;Maven-&gt;Installations-&gt;Add;之后添加自己本地的maven路径就行；</p>

<p><img src="/images/maven_in_eclipse/config_maven_path.jpg" alt="config_maven_path" /></p>

<p><img src="/images/maven_in_eclipse/config_maven_path1.jpg" alt="config_maven_path1" /></p>

<p>软件已经准备好了！那么我们开始构建maven项目吧！</p>

<h2 id="mavenweb">maven构建web项目</h2>

<p>点击Eclipse上方的File-&gt;New-&gt;Other-&gt;Maven Project-&gt;Next-&gt;Next（这里默认就好）-&gt;选择maven-archetype-webapp-&gt;Next
-&gt;填写project信息-&gt;Finish</p>

<p><img src="/images/maven_in_eclipse/create_maven_app.jpg" alt="create_maven_app" /></p>

<p><img src="/images/maven_in_eclipse/create_maven_app1.jpg" alt="create_maven_app1" /></p>

<pre><code>Notes：由于Eclipse创建的Maven项目默认的web版本是2.3的，且没有加入servlet的依赖包，而且可能
会没有`src/main/java`和`src/main/test`这两个目录，所以下面我们就来解决这个问题。
</code></pre>

<h3 id="jdk">1)更改项目的默认jdk</h3>

<p>右键项目根路径-&gt;点击Properties</p>

<p><img src="/images/maven_in_eclipse/config_path.jpg" alt="config_path" /></p>

<p><img src="/images/maven_in_eclipse/config_path1.jpg" alt="config_path1" /></p>

<p><img src="/images/maven_in_eclipse/config_path2.jpg" alt="config_path2" /></p>

<p><img src="/images/maven_in_eclipse/config_path3.jpg" alt="config_path3" /></p>

<p><img src="/images/maven_in_eclipse/config_path4.jpg" alt="config_path4" /></p>

<blockquote>
  <p>如果上一步的Server Runtime没有选项，则可以如下图配置tomcat为服务器</p>
</blockquote>

<p><img src="/images/maven_in_eclipse/config_path5.jpg" alt="config_path5" /></p>

<h3 id="section-1">2)更改配置文件</h3>

<p>切换视图为Navigator,<strong>[由于不方便截图，文字描述]选择Window-&gt;Show View-&gt;Other-&gt;Navigator]</strong></p>

<p><img src="/images/maven_in_eclipse/config_file.jpg" alt="config_file" /></p>

<pre><code>1.将org.eclipse.wst.common.component配置文件中的project-version的1.5.0修改为1.6.0

2.将org.eclipse.wst.common.project.facet.core.xml的jst.web对应的version修改为2.5
</code></pre>

<p>这样，我们的maven项目准备工作就做好了，下面我们开始编写SpringMVC的程序吧！</p>

<h2 id="springmvc">2.构建SpringMVC工程</h2>

<h3 id="spring">2.1 添加Spring依赖包</h3>

<p>用Maven POM Editor打开pom.xml，然后选择Dependencies视图，在Dependencies下点击Add</p>

<pre><code>Spring的依赖包：
    Group Id: org.springframework
    Artifact Id: spring-web
    Version: 3.2.5.RELEASE
</code></pre>

<p>添加完毕后需要将远程包加载到本地来，右键项目根路径Run As-&gt;Maven install</p>

<p>如果报错<code>-Dmaven.multiModuleProjectDirectory system propery is not set. Check $M2_HOME environment variable and mvn script match.</code></p>

<pre><code>可以设一个环境变量M2_HOME指向你的maven安装目录
然后在Window-&gt;Preference-&gt;Java-&gt;Installed JREs-&gt;Edit
在Default VM arguments中设置
-Dmaven.multiModuleProjectDirectory=$M2_HOME
</code></pre>

<h3 id="webxmlspring-mvcxml">2.2 编写web.xml和spring-mvc的xml</h3>

<p><code>web.xml</code> 如下：</p>

<pre><code>    &lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;web-app xmlns="http://java.sun.com/xml/ns/javaee"  
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
      xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"  
      version="3.0"&gt;  
    &lt;servlet&gt;  
	&lt;servlet-name&gt;spring-mvc&lt;/servlet-name&gt;  
	&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;  
    &lt;/servlet&gt;  
  
    &lt;servlet-mapping&gt;  
	&lt;servlet-name&gt;spring-mvc&lt;/servlet-name&gt;  
	&lt;url-pattern&gt;/&lt;/url-pattern&gt;  
    &lt;/servlet-mapping&gt;  
&lt;/web-app&gt;  
</code></pre>

<p><code>spring-mvc-servlet.xml</code> 如下：</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"  
    xmlns:context="http://www.springframework.org/schema/context"  
    xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
    xsi:schemaLocation="  
	http://www.springframework.org/schema/beans       
	http://www.springframework.org/schema/beans/spring-beans-3.0.xsd  
	http://www.springframework.org/schema/context   
	http://www.springframework.org/schema/context/spring-context-3.0.xsd  
	http://www.springframework.org/schema/mvc  
	http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd"&gt;  
  
    &lt;context:component-scan base-package="cn.springmvc.controller" /&gt;  
    &lt;bean id="viewResolver"  
	class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;  
	&lt;property name="prefix" value="/WEB-INF/views/" /&gt;  
	&lt;property name="suffix" value=".jsp" /&gt;  
    &lt;/bean&gt;  
&lt;/beans&gt;  
</code></pre>

<p>需要在WEB-INF目录下创建views目录并创建HelloWorld.jsp文件</p>

<pre><code>&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
    &lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;
    &lt;html&gt;
    &lt;head&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
    &lt;title&gt;Insert title here&lt;/title&gt;title&gt;
    &lt;/meta&gt;head&gt;
    &lt;body&gt;
    &lt;h1&gt;message:₵{message}&lt;/h1&gt;h1&gt;
    &lt;/body&gt;body&gt;
    &lt;/html&gt;
</code></pre>

<p>并且需要在<code>src/main/java</code>下建立一个控制层，包名cn.springmvc.controller，类名为Hello.java</p>

<pre><code>package cn.springmvc.controller;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class Hello {
    
    @RequestMapping("/hello")
    public String HelloWorld(Model model) {
        model.addAttribute("message" , "Hello World!!");
        return "HelloWorld";
    }
}
</code></pre>

<h3 id="section-2">运行程序</h3>

<p>右键项目根路径Run As-&gt;Run On Server-&gt;Next-&gt;Finish</p>

<p>运行结果如下：</p>

<p><img src="/images/maven_in_eclipse/result.jpg" alt="result" /></p>


				</span>
				<div class="journal-date">Published 15 August 2015</div>
				<div class="journal-tags">
				
				
	 
		<a class="tag-cont" href="/tags.html#Maven-ref">
			<div class="tag-l"></div>
			<div class="tag-c">Maven</div>
			<div class="tag-r"></div>
		</a>
	 
		<a class="tag-cont" href="/tags.html#Eclipse-ref">
			<div class="tag-l"></div>
			<div class="tag-c">Eclipse</div>
			<div class="tag-r"></div>
		</a>
	 
		<a class="tag-cont" href="/tags.html#Spring-ref">
			<div class="tag-l"></div>
			<div class="tag-c">Spring</div>
			<div class="tag-r"></div>
		</a>
	



				</div>
			</div>
		</div>
		<div class="clearboth"></div>
	</div>
</div>
	<div class="clearboth"></div>
        


  <div id="comments">
    <div class="ds-thread" data-thread-key="/maven/2015/08/15/buildMavenSpringMVCProject_InEclipse"  data-title="Eclipse下构建SpringMVC的Maven项目 - Dolphin"></div>
</div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"mastery"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>





	<div class="clearboth"></div>
</div>


			</div>
			<div class="clearboth pagebottom"></div>
		</div>
	</div>
	<footer>
	<div class="footer-940">
		<div class="footer-general-info">
			© 2014 Feng Ling.<br><br>
			Content licensed under:<br>
			<a class="cc" href="http://creativecommons.org/licenses/by-sa/3.0/">c a b</a><br>
			<a href = "/about.html">About Me</a><br>
		</div>
		<div class="footer-col-cont">
			<div class="footer-nav-col">
				<h4><a>Categories</a></h4>
				<ul>
					
					


  
     
    	<li><a href="/categories.html#datastructure-ref">
    		datastructure <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#java-ref">
    		java <span>4</span>
    	</a></li>
     
    	<li><a href="/categories.html#notes-ref">
    		notes <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#maven-ref">
    		maven <span>1</span>
    	</a></li>
    
  


				</ul>
			</div>
			<div class="footer-nav-col">
				<h4><a>Pages</a></h4>
				<ul>
					
					
					


  
    
      
    
  
    
      
      	
      	<li><a href="/about.html">About Me</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
  



				</ul>
			</div>
			<div class="footer-nav-col">
				<h4><a>Feed</a></h4>
				<ul>
					<li><a href="/atom.xml">Atom Feed</a></li>
					<li><a href="/rss.xml">RSS Feed</a></li>
				</ul>
			</div>
			<div class="footer-nav-col">
				<h4><a>Links</a></h4>
				<ul>
				 
					<li><a href = "http://mastery001.github.io/">Mastery's Blog</a></li>
				
				</ul>
			</div>
			<div class="footer-nav-col">
				<h4><a href = "/about.html">About Me</a></h4>
				<ul>
				 
					<li><a href = "mailto:zlfbasic@gmail.com">e-mail</a></li>
				 
					<li><a href = "https://github.com/mastery001">Github</a></li>
				 
					<li><a href = "https://plus.google.com/u/0/">Google+</a></li>
				
				</ul>
			</div>
			<div class="clearboth"></div>
		</div>
		<div class="clearboth"></div>
	</div>
	<div class="clearboth"></div>
</footer>
	
</body>
</html>

